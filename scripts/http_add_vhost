#! /bin/bash

if [ $(id -u) != 0 ]; then
	echo "you are not running it as root, use sudo"; exit;
fi;

if [ "$1" == "" ]; then
	echo "no vhost name specified, do http_add_vhost <name of vhost>; exit;
fi;

touch /etc/apache2/sites-available/$1.conf;

echo "<VirtualHost *:80>
	ServerName $1.quinten-nouters.sb.uclllabs.be
	DocumentRoot /etc/www/html/$1
	ErrorLog /etc/www/html/$1/$1-error.log
	CustomLog /etc/www/html/$1/$1-access.log
</VirtualHost>"  >> /etc/apache2/sites-available/$1.conf;

mkdir /etc/www/html/$1;

touch /etc/www/html/$1/index.html;
echo "<!DOCTYPE html PUBLIC>
<html>
<body>
<p>default page for vhost $1</p>
</body>
</html>" >> /etc/www/html/$1/index.html;

a2ensite $1.conf;
systemctl reload apache2;
